## 和一位数字银行中端系统架构师的关于讨论

普及个知识点：中央对手方（CCP）清算
0. 参与方

- 银行A（清算会员 / 客户）
- 银行B（清算会员 / 客户）
- 中央对手方 CCP
- 结算银行 / 托管机构
- 监管机构（在背景里）

1. 正常清算链
交易成交  
→ 交易录入 & 双方确认  
→ 报送 CCP 清算系统  
→ CCP 接受交易并完成“创新”（A ↔ B → A ↔ CCP ↔ B）  
→ 头寸登记 & 净额化（净多/净空头寸形成）  
→ 计算并缴纳初始保证金（IM）  
→ 每日盯市，计算并收付变动保证金（VM）  
→ 处理生命周期事件（付息 / 行权 / 交割 / 组合压缩等）  
→ 提前平仓或自然到期进行最终结算  
→ 释放并返还剩余初始保证金 / 抵押品  
→ 交易生命周期结束

2. 违约处理
任意阶段发现会员违约
→ CCP 宣布违约触发  
→ 启动违约损失分摊瀑布（违约会员 IM+VM → 违约基金 → CCP 资本 → 其他会员分摊）  
→ 对违约会员头寸进行对冲 / 拍卖 / 强制平仓  
→ 覆盖亏损并完成风险出清  
→ CCP 和市场恢复稳态运行
